var snow = { info: { top: 0, left: 0, zIndex: 500, number: 20 }, down: function () { var g = window.innerWidth; var h = window.innerHeight; var e = document.createElement("canvas"); e.style.position = "fixed"; e.style.pointerEvents = "none"; e.style.top = snow.info.top + "px"; e.style.left = snow.info.left + "px"; e.style.zIndex = snow.info.zIndex; e.width = g; e.height = h; document.body.appendChild(e); var d = []; for (var b = 0; b < snow.info.number; b++) { d.push({ x: Math.random() * g, y: Math.random() * h, r: Math.random() * 4 + 1, n: Math.random() * 70 }) } var c = e.getContext("2d"); var f = 0; var a = new Image(); a.src = "http://www.incake.net/img/yinghua.png"; setInterval(function () { c.clearRect(0, 0, g, h); c.beginPath(); for (var k = 0; k < 20; k++) { var j = d[k]; c.drawImage(a, j.x, j.y) } f += 0.01; for (var k = 0; k < 20; k++) { var j = d[k]; j.y += Math.cos(f + j.n) + j.r / 2; j.x += Math.sin(f) * 2; if (j.x > g + 5 || j.x < -5 || j.y > h) { d[k] = k % 3 > 0 ? { x: Math.random() * g, y: -10, r: j.r, n: j.n} : Math.sin(f) > 0 ? { x: -5, y: Math.random() * h, r: j.r, n: j.n} : { x: g + 5, y: Math.random() * h, r: j.r, n: j.n} } } }, 15) } };